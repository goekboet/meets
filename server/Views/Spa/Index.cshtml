@using Meets.Controllers;
@using System;
@model AppState;

@{
    ViewData["Title"] = "Home Page";
    var hasCreds = new Func<AppState, string>(s => s.HasCreds ? "true" : "false");
}

<script>
    let appstate = 
        { 
            hasCreds:@hasCreds(Model),
            now: Date.now()
        };
    var app = Elm.Main.init({flags: appstate});
    app.ports.getTimesWindow.subscribe(v => {
        console.log("computing timewindow");
        app.ports.gotTimesWindow.send(toWindow(v));
        
    })
</script>